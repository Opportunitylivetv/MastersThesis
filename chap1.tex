						\chapter{Physical Simulation of Water Particles}

\section{Basic Formulation}

Here we talk about how water particles must be simulated as part of the drainability analysis calculation.
\\

Many methods -- smoothed hydrodynamic particles, etc etc
\\

Another approach is to simply construct the kinematic equations and integrate in time. Euler's method, etc
\\

We will examine a parametric approach.
\\

	\subsection{Parametric Equations (rays)}

Parametric rays look like this (equation).


	\subsection{Geometric Primitive Intersections}

Once parametric rays are defined, you can easily intersect them with geometric primitives
\myfigure{rayexample}{2.5in}

Example of sphere ray intersection equation.
\myfigure{raysphere}{2.5in}


\section{Previous Work}

Previous work (Yusuke's work) involved a few simplifying assumptions about water particle simulation.
\\

	\subsection{Infinitesimally Slow Rotations}
The first was that rotations would be infinitesimally slow, meaning that gravity direction was always essentially perpendicular to the leading edge of the rotation when a particle fell.
\myfigure{prevworkgravityperp}{2.5in}


	\subsection{Inelastic Collisions}
The second was that particle collisions would be inelastic, meaning that velocities were instantaneously projected onto the plane or edge that they collided with.

\myfigure{prevworkinelasticcollision}{2.5in}


	\subsection{Kinetic Energy Limitation}

The last was that particles never accumulated kinetic energy above an epsilon value, meaning that they did not leave leading edges with a finite velocity. This means that all paths traced out by the particles were straight lines. This allowed for fast particle simulation but unrealistic particle behavior.

\section{Adaption to Finite Velocities}

This paper adapts the particle simulation to finite velocities and rotation speeds while maintaining the performant nature of the simulation.

	\subsection{Parametric Equation Modification}

Now our parametric equation includes an acceleration term:

$$
\vec{x}(t) = \vec{x_0} + \vec{v_0}t + \vec{a}t
$$

		\subsubsection{Free Fall Equation}
In free-fall, this leaves us with a parabolic equation of the particle's path. Kinematically valid, but assumes no aerodynamic drag.

\myfigure{freefallequation}{2.5in}

		\subsubsection{Sliding Equation}

When the particle comes to rest against an edge in the workpiece, it begins to slide along this edge. The acceleration vector is projected along the edge, and the resulting component of acceleration is responsible for accelerating the particle.
\\

Note that while the particle is now traveling along an edge, it is essentially the same as the freefall equation with a new projected acceleration.

$$
\vec{x}(t) = \vec{x_0} + \vec{v_0}t + \vec{a_{projected}}t
$$

\myfigure{slidingequation}{2.5in}

		\subsubsection{Rotation}

We would like to simulate the particle during workpiece rotation. Since we no longer assume infinitely slow rotations, our particles will need to be simulated during workpiece rotation.
\\

In this paper, we choose our frame of reference to be the $X$ $Y$ axes that define the workpiece geometry. This means that when the workpiece rotates, our frame of reference stays fixed to the workpiece. During rotation, only the acceleration vector changes in direction -- the rest of the math stays the same.

We see now how this rotating acceleration vector affects the two above equations.

		\subsubsection{Concurrent Rotation \& Sliding Equation}

When the particle is sliding on an edge, the acceleration vector is projected along the edge. A rotating acceleration vector, when changed, is equivalent to a fixed-direction vector with changing magnitude.

$$
\vec{x}(t) = \vec{x_0} + \vec{v_0}t + \hat{a_{projected}}t \cdot mag_{accel}(t)
$$


		\subsubsection{Assumption \#1 - No concurrent Rotation + Freefall}

When the particle is in free-fall, the acceleration vector is no longer projected along an edge.

$$
\vec{x}(t) = \vec{x_0} + \vec{v_0}t + \vec{a}(t) \cdot t
$$

Although possible to integrate with numerical methods, no easy way of substituting into parametric equations and solving.

\myfigure{norotationfreefall}{2.5in}

	\subsection{Elastic Collisions}

		\subsubsection{Planar Collision}

		\subsubsection{Sliding-Edge Collision}

		\subsubsection{Sliding-Corner Collision}

	\subsection{Conservation of Momentum}

		\subsubsection{Settling Guarantee}

		\subsubsection{Duration of Simulation}

		%\subsubsubsection{Concave Vertex}

		%\subsubsubsection{Workpiece Exit}

\section{Results}

	\subsection{Run Time}

	\subsection{Accuracy Comparison}

		\subsubsection{With Euler Integration}

\section{Future Work \& Discussion}

	\subsection{Bounding Box Method Adaption}

	\subsection{Bounded Simulation Between Limits}


